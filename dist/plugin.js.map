{"version":3,"file":"plugin.js","sources":["esm/definitions.js","esm/index.js","esm/web.js"],"sourcesContent":["export var SensorDelay;\n(function (SensorDelay) {\n    SensorDelay[SensorDelay[\"FASTEST\"] = 0] = \"FASTEST\";\n    SensorDelay[SensorDelay[\"GAME\"] = 1] = \"GAME\";\n    SensorDelay[SensorDelay[\"UI\"] = 2] = \"UI\";\n    SensorDelay[SensorDelay[\"NORMAL\"] = 3] = \"NORMAL\";\n})(SensorDelay || (SensorDelay = {}));\nexport var SensorType;\n(function (SensorType) {\n    SensorType[SensorType[\"AMBIENT_LIGHT\"] = 0] = \"AMBIENT_LIGHT\";\n    SensorType[SensorType[\"ACCELEROMETER\"] = 1] = \"ACCELEROMETER\";\n    SensorType[SensorType[\"TEMPERATURE\"] = 2] = \"TEMPERATURE\";\n    SensorType[SensorType[\"GAME_ROTATION_VECTOR\"] = 3] = \"GAME_ROTATION_VECTOR\";\n    SensorType[SensorType[\"GEOMAGNETIC_ROTATION_VECTOR\"] = 4] = \"GEOMAGNETIC_ROTATION_VECTOR\";\n    SensorType[SensorType[\"GRAVITY\"] = 5] = \"GRAVITY\";\n    SensorType[SensorType[\"GYROSCOPE\"] = 6] = \"GYROSCOPE\";\n    SensorType[SensorType[\"HEART_BEAT\"] = 7] = \"HEART_BEAT\";\n    SensorType[SensorType[\"HEART_RATE\"] = 8] = \"HEART_RATE\";\n    SensorType[SensorType[\"LINEAR_ACCELERATION\"] = 9] = \"LINEAR_ACCELERATION\";\n    SensorType[SensorType[\"MAGNETOMETER\"] = 10] = \"MAGNETOMETER\";\n    SensorType[SensorType[\"MOTION_DETECTOR\"] = 11] = \"MOTION_DETECTOR\";\n    SensorType[SensorType[\"POSE_6DOF\"] = 12] = \"POSE_6DOF\";\n    SensorType[SensorType[\"PRESSURE\"] = 13] = \"PRESSURE\";\n    SensorType[SensorType[\"PROXIMITY\"] = 14] = \"PROXIMITY\";\n    SensorType[SensorType[\"RELATIVE_HUMIDITY\"] = 15] = \"RELATIVE_HUMIDITY\";\n    SensorType[SensorType[\"ROTATION_VECTOR\"] = 16] = \"ROTATION_VECTOR\";\n    SensorType[SensorType[\"SIGNIFICANT_MOTION\"] = 17] = \"SIGNIFICANT_MOTION\";\n    SensorType[SensorType[\"STATIONARY_DETECTOR\"] = 18] = \"STATIONARY_DETECTOR\";\n    SensorType[SensorType[\"STEP_COUNTER\"] = 19] = \"STEP_COUNTER\";\n    SensorType[SensorType[\"STEP_DETECTOR\"] = 20] = \"STEP_DETECTOR\";\n    SensorType[SensorType[\"ABSOLUTE_ORIENTATION\"] = 21] = \"ABSOLUTE_ORIENTATION\";\n    SensorType[SensorType[\"RELATIVE_ORIENTATION\"] = 22] = \"RELATIVE_ORIENTATION\";\n})(SensorType || (SensorType = {}));\n//# sourceMappingURL=definitions.js.map","import { registerPlugin } from '@capacitor/core';\nconst Sensors = registerPlugin('Sensors', {\n    web: () => import('./web').then((m) => new m.SensorsWeb()),\n});\nexport * from './definitions';\nexport { Sensors };\n//# sourceMappingURL=index.js.map","import { WebPlugin } from '@capacitor/core';\nimport { SensorDelay, SensorType } from './definitions';\nconst webSupportedSensors = {\n    AbsoluteOrientationSensor: SensorType.ABSOLUTE_ORIENTATION,\n    Accelerometer: SensorType.ACCELEROMETER,\n    AmbientLightSensor: SensorType.AMBIENT_LIGHT,\n    GravitySensor: SensorType.GRAVITY,\n    Gyroscope: SensorType.GYROSCOPE,\n    LinearAccelerationSensor: SensorType.LINEAR_ACCELERATION,\n    Magnetometer: SensorType.MAGNETOMETER,\n    RelativeOrientationSensor: SensorType.RELATIVE_ORIENTATION,\n};\nconst webSensorFrequency = {\n    [SensorDelay.FASTEST]: 0,\n    [SensorDelay.GAME]: 15,\n    [SensorDelay.UI]: 30,\n    [SensorDelay.NORMAL]: 60,\n};\nconst webNeededPerms = {\n    [SensorType.ABSOLUTE_ORIENTATION]: ['accelerometer', 'gyroscope', 'magnetometer'],\n    [SensorType.ACCELEROMETER]: ['accelerometer'],\n    [SensorType.AMBIENT_LIGHT]: ['ambient-light-sensor'],\n    [SensorType.GRAVITY]: ['accelerometer'],\n    [SensorType.GYROSCOPE]: ['gyroscope'],\n    [SensorType.LINEAR_ACCELERATION]: ['accelerometer'],\n    [SensorType.MAGNETOMETER]: ['magnetometer'],\n    [SensorType.RELATIVE_ORIENTATION]: ['accelerometer', 'gyroscope'],\n};\nconst getWindowProperty = (type) => Object.keys(webSupportedSensors).find((key) => webSupportedSensors[key] === type);\nexport class SensorWeb {\n    constructor(type, notify, delay = SensorDelay.NORMAL) {\n        var _a;\n        this.type = type;\n        this.notify = notify;\n        this.delay = delay;\n        const windowKey = (_a = getWindowProperty(type)) !== null && _a !== void 0 ? _a : '';\n        this.sensor = new window[windowKey]({ frequency: webSensorFrequency[delay] });\n    }\n    start() {\n        this.sensor.addEventListener('reading', () => {\n            var _a;\n            const values = [];\n            if ('illuminance' in this.sensor)\n                values.push(this.sensor.illuminance);\n            if ('quaternion' in this.sensor)\n                values.push(...this.sensor.quaternion);\n            if ('x' in this.sensor)\n                values.push(this.sensor.x);\n            if ('y' in this.sensor)\n                values.push(this.sensor.y);\n            if ('z' in this.sensor)\n                values.push(this.sensor.z);\n            const result = {\n                accuracy: 0,\n                timestamp: (_a = this.sensor.timestamp) !== null && _a !== void 0 ? _a : 0,\n                values,\n            };\n            this.notify(SensorType[this.type], result);\n        });\n        this.sensor.start();\n    }\n    stop() {\n        this.sensor.removeEventListener('reading', null);\n        this.sensor.stop();\n    }\n}\nexport class SensorsWeb extends WebPlugin {\n    async requestPermissions(sensor) {\n        if (typeof navigator === 'undefined' || !navigator.permissions) {\n            this.unavailable('Permissions API not available in this browser.');\n        }\n        const permission = await Promise.all(webNeededPerms[sensor.type].map((p) => navigator.permissions.query({ name: p })));\n        return permission.reduce((p, c) => {\n            return Object.assign(Object.assign({}, p), { [c.name]: c.state });\n        }, {});\n    }\n    async start(sensor) {\n        sensor.start();\n    }\n    async stop(sensor) {\n        sensor.stop();\n    }\n    async init({ type, delay }) {\n        if (this.isPresent(type)) {\n            const sensor = new SensorWeb(type, this.notifyListeners, delay);\n            return sensor;\n        }\n        return undefined;\n    }\n    async getAvailableSensors() {\n        const sensorsList = Object.entries(webSupportedSensors)\n            .filter(([sensorName]) => sensorName in window)\n            .map(([, sensorType]) => sensorType);\n        return {\n            sensors: sensorsList,\n        };\n    }\n    isPresent(type) {\n        if (type in SensorType) {\n            const windowKey = getWindowProperty(type);\n            if (windowKey)\n                return windowKey in window;\n            return false;\n        }\n        return false;\n    }\n}\n//# sourceMappingURL=web.js.map"],"names":["SensorDelay","SensorType","registerPlugin","WebPlugin"],"mappings":"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"}